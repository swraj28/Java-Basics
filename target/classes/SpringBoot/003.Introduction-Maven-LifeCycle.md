Introduction to Maven Lifecycle
==============================

What is Maven?
-------------
Maven is a build automation and project management tool used primarily for Java projects. It provides a standard way to build projects, manage dependencies, and document project information.

Key Features of Maven:
1. Project Management
2. Dependency Management
3. Build Lifecycle
4. Project Documentation
5. Project Reporting

Maven Project Structure
----------------------
```
project-root/
├── pom.xml
├── src/
│   ├── main/
│   │   ├── java/
│   │   ├── resources/
│   │   └── webapp/
│   └── test/
│       ├── java/
│       └── resources/
└── target/
```

Maven Lifecycle Phases
---------------------
Maven has three standard lifecycles:
1. Clean
2. Default
3. Site

Each lifecycle consists of phases that are executed in a specific order.

1. Clean Lifecycle
-----------------
Purpose: Cleans up the project by removing all files generated by the previous build.

Phases:
```
pre-clean
    |
    v
clean
    |
    v
post-clean
```

2. Default Lifecycle
-------------------
Purpose: Handles the project deployment.

Phases:
```
validate
    |
    v
compile
    |
    v
test
    |
    v
package
    |
    v
verify
    |
    v
install
    |
    v
deploy
```

Detailed Explanation of Default Lifecycle Phases:

1. validate
   - Validates the project structure
   - Checks if all necessary information is available
   - Verifies project dependencies

2. compile
   - Compiles the source code
   - Generates class files
   - Places them in the target/classes directory

3. test
   - Runs unit tests
   - Executes test cases
   - Generates test reports

4. package
   - Packages the compiled code
   - Creates JAR, WAR, or EAR file
   - Places it in the target directory

5. verify
   - Runs integration tests
   - Checks package validity
   - Verifies quality criteria

6. install
   - Installs the package to local repository
   - Makes it available for other projects
   - Stores in .m2 directory

7. deploy
   - Copies the package to remote repository
   - Makes it available for other developers
   - Typically used in CI/CD pipelines

3. Site Lifecycle
----------------
Purpose: Generates project documentation and reports.

Phases:
```
pre-site
    |
    v
site
    |
    v
post-site
    |
    v
site-deploy
```

Maven in Spring Boot Projects
---------------------------
Spring Boot projects use Maven for:
1. Dependency Management
2. Build Process
3. Plugin Management
4. Project Configuration

Example Spring Boot pom.xml:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0">
    <modelVersion>4.0.0</modelVersion>
    
    <groupId>com.example</groupId>
    <artifactId>demo</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.0</version>
    </parent>
    
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
```

Common Maven Commands
-------------------
1. Basic Commands:
   ```
   mvn clean              # Cleans the project
   mvn compile           # Compiles the project
   mvn test              # Runs tests
   mvn package           # Creates the package
   mvn install           # Installs to local repository
   mvn deploy            # Deploys to remote repository
   ```

2. Spring Boot Specific:
   ```
   mvn spring-boot:run   # Runs the Spring Boot application
   mvn spring-boot:repackage  # Repackages the application
   ```

Maven Goals and Plugins
----------------------
Goals are specific tasks that can be executed within a phase.

Common Goals:
1. compiler:compile
2. surefire:test
3. jar:jar
4. install:install

Example Plugin Configuration:
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.8.1</version>
    <configuration>
        <source>1.8</source>
        <target>1.8</target>
    </configuration>
</plugin>
```

Dependency Management
-------------------
Maven manages dependencies through:
1. Central Repository
2. Local Repository
3. Remote Repositories

Dependency Scope:
1. compile (default)
2. provided
3. runtime
4. test
5. system
6. import

Example Dependency:
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <version>2.7.0</version>
    <scope>compile</scope>
</dependency>
```

Best Practices
-------------
1. Project Structure:
   - Follow standard Maven directory layout
   - Keep pom.xml clean and organized
   - Use proper dependency scopes

2. Dependency Management:
   - Use version properties
   - Exclude transitive dependencies when needed
   - Keep dependencies up to date

3. Build Configuration:
   - Use appropriate plugins
   - Configure build profiles
   - Set up proper resource filtering

4. Documentation:
   - Maintain README.md
   - Document build process
   - Keep pom.xml comments updated

Common Issues and Solutions
-------------------------
1. Dependency Conflicts:
   - Use dependency:tree to analyze
   - Exclude conflicting dependencies
   - Use dependency management

2. Build Failures:
   - Check Maven logs
   - Verify plugin versions
   - Clean and rebuild

3. Performance Issues:
   - Use parallel builds
   - Configure proper memory settings
   - Use Maven wrapper

Maven Wrapper
------------
Maven Wrapper ensures consistent builds across different environments.

Setup:
```bash
mvn wrapper:wrapper
```

Usage:
```bash
./mvnw clean install
```

Benefits:
1. Consistent Maven version
2. No need to install Maven
3. Works in CI/CD pipelines
4. Easy project setup

Integration with IDEs
-------------------
1. IntelliJ IDEA:
   - Built-in Maven support
   - Maven tool window
   - Run configurations

2. Eclipse:
   - M2Eclipse plugin
   - Maven perspective
   - Run configurations

3. VS Code:
   - Maven for Java extension
   - Maven explorer
   - Run configurations
